{% extends "base.html" %}
{% load position %}

{% block contents %}
{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<div class="row">
  <div class="span8">
    Displaying {{ page_obj.start_index}} to {{ page_obj.end_index}} of {{paginator.count}} observations.
  </div>
  <div class="span2">
    {% if page_obj.has_previous %}
    <a href="/observation/page{{page_obj.previous_page_number}}/"><i class="icon-backward"></i> Previous</a>
    {% endif %}
  </div>
  <div class="span2">
    {% if page_obj.has_next %}
    <a href="/observation/page{{page_obj.next_page_number}}/">Next <i class="icon-forward"></i></a>
    {% endif %}
  </div>
</div>

<hr />


<table class="table table-striped table-condensed">
  <thead>
    <tr>
      <th>ID</th>
      <th>Date</th>
      <th>Duration (s)</th>
      <th>Targets</th>
    </tr>
  </thead>

  {% for obs in obs_list %}

  <tr>
    <td><a href="/observation/{{ obs.pk }}/">{{ obs.obsid }}</a></td>
    <td>{{ obs.start_time|date:"Y-n-d" }}</td>
    <td>{{ obs.duration }} s</td>
    <td>
    {% for beam in obs.beam_set.all %}
      <a href="/field/{{ beam.field.pk }}/">{{ beam.field.name }}</a>{% if not forloop.last %},{% endif %}
    {% endfor %}
    </td>
  </tr>

  {% endfor %}
</table>
{% endblock %}
